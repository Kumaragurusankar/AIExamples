<mxfile host="app.diagrams.net">
  <diagram name="Middle Office Clean Architecture">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Upstream Clients -->
        <mxCell id="up1" value="Client FIX 4.2" style="rounded=1;fillColor=#dae8fc;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="up2" value="Client FIX 4.4" style="rounded=1;fillColor=#dae8fc;" vertex="1" parent="1">
          <mxGeometry x="40" y="120" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="up3" value="Client REST/JSON" style="rounded=1;fillColor=#dae8fc;" vertex="1" parent="1">
          <mxGeometry x="40" y="200" width="120" height="50" as="geometry"/>
        </mxCell>

        <!-- Solace -->
        <mxCell id="solace" value="Solace Event Broker" style="rounded=1;fillColor=#ffe6cc;" vertex="1" parent="1">
          <mxGeometry x="200" y="100" width="180" height="80" as="geometry"/>
        </mxCell>

        <!-- Bridge -->
        <mxCell id="bridge" value="Bridge Service&#xa;- Protocol Adapter&#xa;- Canonical Event Transformation" style="rounded=1;fillColor=#d5e8d4;" vertex="1" parent="1">
          <mxGeometry x="420" y="100" width="240" height="80" as="geometry"/>
        </mxCell>

        <!-- AMPS -->
        <mxCell id="amps" value="AMPS Event Backbone&#xa;- execution.raw&#xa;- execution.validated&#xa;- trade.created&#xa;- trade.final" style="rounded=1;fillColor=#fff2cc;" vertex="1" parent="1">
          <mxGeometry x="700" y="80" width="240" height="120" as="geometry"/>
        </mxCell>

        <!-- Services -->
        <mxCell id="validator" value="Trade Validator Service" style="rounded=1;fillColor=#f8cecc;" vertex="1" parent="1">
          <mxGeometry x="1000" y="40" width="180" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="creator" value="Trade Creator Service" style="rounded=1;fillColor=#f8cecc;" vertex="1" parent="1">
          <mxGeometry x="1000" y="120" width="180" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="enricher" value="Trade Enricher Service" style="rounded=1;fillColor=#f8cecc;" vertex="1" parent="1">
          <mxGeometry x="1000" y="200" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Downstream -->
        <mxCell id="down1" value="Downstream System 1" style="rounded=1;fillColor=#d5d8db;" vertex="1" parent="1">
          <mxGeometry x="1240" y="40" width="180" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="down2" value="Downstream System 2" style="rounded=1;fillColor=#d5d8db;" vertex="1" parent="1">
          <mxGeometry x="1240" y="120" width="180" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="down3" value="Downstream System 3" style="rounded=1;fillColor=#d5d8db;" vertex="1" parent="1">
          <mxGeometry x="1240" y="200" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- Edges -->
        <mxCell id="e1" edge="1" parent="1" source="up1" target="solace"/>
        <mxCell id="e2" edge="1" parent="1" source="up2" target="solace"/>
        <mxCell id="e3" edge="1" parent="1" source="up3" target="solace"/>
        <mxCell id="e4" edge="1" parent="1" source="solace" target="bridge"/>
        <mxCell id="e5" edge="1" parent="1" source="bridge" target="amps"/>
        <mxCell id="e6" edge="1" parent="1" source="amps" target="validator"/>
        <mxCell id="e7" edge="1" parent="1" source="validator" target="creator"/>
        <mxCell id="e8" edge="1" parent="1" source="creator" target="enricher"/>
        <mxCell id="e9" edge="1" parent="1" source="enricher" target="down1"/>
        <mxCell id="e10" edge="1" parent="1" source="enricher" target="down2"/>
        <mxCell id="e11" edge="1" parent="1" source="enricher" target="down3"/>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
